<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Player Contract</title>
    <link rel="import" href="includes/head.html">
    <link rel="stylesheet" type="text/css" href="includes/Style.css">
</head>
<body>
    <header>
        <nav class="navbar navbar-inverse">
            <div class="navbar-header">
                <a class="navbar-brand" href="index.html">Team Management System</a>
            </div>
            <ul class="nav navbar-nav">
                <li><a href="injuries.html">Injury Page</a></li>
                <li><a href="contract.html">Player Contract Page</a></li>
            </ul>
        </nav>
    </header>
    <h1>View Contracts</h1>
    <div class="container" id="addContract">

    </div>
    <div class ="container" id="playerContracts"></div>
    <script>
        function getAllPlayerContract() {
            service("getAllContracts", "{}", function (data) {
                console.log(data);
                var d = "";
                $.each(data.Contracts, function (index, value) {
                    d += "<div class = 'row'>";
                    d += "<h3>" + value.Name +"</h3>";
                    d += '<table class="table" style="max-width:800px;">';
                    d += "<thead class='thead-dark'>";
                    d += "<tr>";
                    d += "<th>Year</th><th>Salary</th><th>Bonus</th>";
                    d += "</tr>";
                    d += "</thead>";
                    d += "<tbody>";
                    $.each(value.Year, function (year, yearValue) {
                        d += "<tr>";
                        d += "<td class = 'col-md-4'>" + yearValue.year + "</td>";
                        d += "<td class = 'col-md-4'>" + formatNumber(yearValue.salary) + "</td>";
                        d += "<td class = 'col-md-4'>" + formatNumber(yearValue.bonus) + "</td>";
                        d += "</tr>";
                    });
                    d += "</tbody>";
                    d += "</table>";
                    d += "</div>";
                });
                $("#playerContracts").html(d);
            }, function () { console.log("fail") });
        }

        function formatNumber(num) {
            return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,')
        }


        function showDetails(id) {
            alert("You selected id: " + id);
        }

        getAllPlayerContract()

    </script>
</body>
</html>


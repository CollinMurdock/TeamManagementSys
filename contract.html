<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Player Contract</title>
    <link rel="import" href="includes/head.html">
    <link rel="stylesheet" type="text/css" href="includes/Style.css">
</head>
<body>
    <header>
        <nav class="navbar navbar-inverse">
            <div class="navbar-header">
                <a class="navbar-brand" href="index.html">Team Management System</a>
            </div>
            <ul class="nav navbar-nav">
                <li><a href="injuries.html">Injury Page</a></li>
                <li><a href="contract.html">Player Contract Page</a></li>
            </ul>
        </nav>
    </header>
    <h1>View Contracts</h1>
    <div class="container" id="addContract">
        <div class="row">
            <div id="addContract">
                <button id="addContractButton" class="btn">AddContract</button>
            </div>
            <div id="addContractForm" style="display:none;">
                <form>
                    <div class="form-row">
                        <div class="form-group col-md-8">
                            <label>Name</label>
                            <input class="form-control" type="text" id="player-name" placeholder="John Smith" />
                        </div>
                        <div class="form-group col-md-4">
                            <label>Position</label>
                            <select class="form-control" id="player-position">
                                <option>Guard</option>
                                <option>Forward</option>
                                <option>Center</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group col-md-8">
                        <label>Date of Birth</label>
                        <input class="form-control" type="date" id="player-dob">
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label>Height (inches)</label>
                            <input class="form-control" type="number" id="player-height">
                        </div>
                        <div class="form-group col-md-6">
                            <label>Weight (pounds)</label>
                            <input class="form-control" type="number" id="player-weight">
                        </div>
                    </div>

                    <div class="form-group col-md-6">
                        <button id="submit-player-button" type="button" class="btn">Submit Player</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class ="container" id="playerContracts"></div>
    <script>
        function getAllPlayerContract() {
            service("getAllContracts", "{}", function (data) {
                console.log(data);
                var d = "";
                $.each(data.Contracts, function (index, value) {
                    d += "<div class = 'row'>";
                    d += "<h3>" + value.Name +"</h3>";
                    d += '<table class="table" style="max-width:800px;">';
                    d += "<thead class='thead-dark'>";
                    d += "<tr>";
                    d += "<th>Year</th><th>Salary</th><th>Bonus</th>";
                    d += "</tr>";
                    d += "</thead>";
                    d += "<tbody>";
                    $.each(value.Year, function (year, yearValue) {
                        d += "<tr>";
                        d += "<td class = 'col-md-4'>" + yearValue.year + "</td>";
                        d += "<td class = 'col-md-4'>" + formatNumber(yearValue.salary) + "</td>";
                        d += "<td class = 'col-md-4'>" + formatNumber(yearValue.bonus) + "</td>";
                        d += "</tr>";
                    });
                    d += "</tbody>";
                    d += "</table>";
                    d += "";
                    d += "</div>";
                });
                $("#playerContracts").html(d);
            }, function () { console.log("fail") });
        }

        function formatNumber(num) {
            return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,')
        }


        function showDetails(id) {
            alert("You selected id: " + id);
        }


        $("#addContractButton").click(function () {
            $(this).css("display", "none");
            $("#addContractForm").css("display", "block");
        });

        getAllPlayerContract()

    </script>
</body>
</html>

